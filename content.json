{"meta":{"title":"lli","subtitle":"不积跬步,无以至千里","description":"有些事需要拿出永不言弃的勇气","author":"Li Hao","url":"http://yoursite.com","root":"/"},"pages":[{"title":"404 Not Found：该页无法显示","date":"2019-07-26T15:38:01.000Z","updated":"2019-07-26T15:40:28.326Z","comments":false,"path":"/404.html","permalink":"http://yoursite.com//404.html","excerpt":"","text":""},{"title":"关于我","date":"2019-07-26T11:19:20.000Z","updated":"2019-07-26T11:20:49.750Z","comments":true,"path":"about/index.html","permalink":"http://yoursite.com/about/index.html","excerpt":"","text":""},{"title":"分类","date":"2019-07-26T11:36:10.000Z","updated":"2019-07-27T14:29:47.655Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"标签","date":"2019-07-26T10:30:34.000Z","updated":"2019-07-26T11:15:40.109Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"MySQL 层级表结构相关脚本","slug":"2020/mysql","date":"2020-09-11T09:02:07.946Z","updated":"2020-09-11T09:02:07.947Z","comments":true,"path":"2020/09/11/2020/mysql/","link":"","permalink":"http://yoursite.com/2020/09/11/2020/mysql/","excerpt":"","text":"MySQL 层级表结构相关脚本========================1.刷新排序值===================== 刷新同一层级排序值SELECT result.id, result.parent_id, result.order_index, result.new_indexFROM ( SELECT tar.id, tar.parent_id, tar.order_index, @rownum := @rownum + 1, IF ( @pid = tar.parent_id, @rank := @rank + 1, @rank := 1 ) AS new_index, @pid := tar.parent_id FROM ( SELECT res_id AS id, IFNULL( parent_id, 0 ) AS parent_id, order_index FROM baseinfo_resource_menu WHERE module = 2 ORDER BY parent_id ASC ) tar, ( SELECT @rownum := 0, @pid := NULL, @rank := 0 ) a ) result; ========================2.刷新编码========================== 查询编码错误数据SELECT target.dept_id, target.parent_id, target.code, source.newCodeFROM baseinfo_department AS target INNER JOIN ( SELECT child.dept_id, child.code AS child_code, child.order_index, parent.code AS parent_code, CONCAT( IFNULL( parent.code, ‘’ ), LPAD( child.order_index, 3, ‘0’ ) ) AS newCode FROM baseinfo_department AS child LEFT JOIN baseinfo_department AS parent ON child.parent_id = parent.dept_id ORDER BY parent.code, child.order_index ) AS sourceWHERE target.module = 0 AND target.dept_id = source.dept_id AND target.code &lt;&gt; source.newCode; 刷新编码(同一层级排序不可以重复)UPDATE baseinfo_department AS targetINNER JOIN ( SELECT child.dept_id, child.code AS child_code, child.order_index, parent.code AS parent_code, CONCAT( IFNULL( parent.code, ‘’ ), LPAD( child.order_index, 3, ‘0’ ) ) AS newCode FROM baseinfo_department AS child LEFT JOIN baseinfo_department AS parent ON child.parent_id = parent.dept_id ORDER BY parent.code, child.order_index ) AS source ON target.dept_id = source.dept_id SET target.code = source.newCodeWHERE target.module = 0;=====================3.刷新全路径名称======================= 查询全路径错误数据SELECT Source.ParentDeptName, Target.*FROM baseinfo_department AS Target INNER JOIN ( SELECT IFNULL( ( SELECT GROUP_CONCAT( name ORDER BY code SEPARATOR ‘/‘ ) AS ParentDeptName FROM baseinfo_department WHERE code = LEFT ( DeptInfo.code, LENGTH( code ) ) AND LENGTH( code ) &gt; 3 ), DeptInfo.name ) AS ParentDeptName, DeptInfo.* FROM baseinfo_department AS DeptInfo ) AS SourceWHERE Target.dept_id = Source.dept_id AND Target.full_name &lt;&gt; Source.ParentDeptName; 全路径部门名称初始化UPDATE baseinfo_department AS TargetINNER JOIN ( SELECT IFNULL( ( SELECT GROUP_CONCAT( name ORDER BY code SEPARATOR ‘/‘ ) AS ParentDeptName FROM baseinfo_department WHERE code = LEFT ( DeptInfo.code, LENGTH( code ) ) AND LENGTH( code ) &gt; 3 ), DeptInfo.name ) AS ParentDeptName, DeptInfo.* FROM baseinfo_department AS DeptInfo ) AS Source ON Target.dept_id = Source.dept_id SET Target.full_name = Source.ParentDeptName;","categories":[{"name":"LLI","slug":"LLI","permalink":"http://yoursite.com/categories/LLI/"},{"name":"Mysql","slug":"LLI/Mysql","permalink":"http://yoursite.com/categories/LLI/Mysql/"}],"tags":[]},{"title":"Hello World","slug":"hello-world","date":"2019-07-27T14:48:48.540Z","updated":"2019-07-27T14:48:48.540Z","comments":true,"path":"2019/07/27/hello-world/","link":"","permalink":"http://yoursite.com/2019/07/27/hello-world/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"LLI","slug":"LLI","permalink":"http://yoursite.com/categories/LLI/"},{"name":"hexo","slug":"LLI/hexo","permalink":"http://yoursite.com/categories/LLI/hexo/"}],"tags":[]},{"title":"Hexo不同电脑之间工作","slug":"2019/hexo-diff-work","date":"2019-07-27T14:48:48.536Z","updated":"2019-07-27T14:48:48.537Z","comments":true,"path":"2019/07/27/2019/hexo-diff-work/","link":"","permalink":"http://yoursite.com/2019/07/27/2019/hexo-diff-work/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start从github下载blog-hexo代码到本地前提条件 安装Git，Node， 切换npm源，建议使用淘宝 全局安装Hexo 进入blog-hexo根目录，安装npm依赖（npm install） 本地开发1$ hexo clean &amp;&amp; hexo s More info: Server 生成静态文件1$ hexo clean &amp;&amp; hexo generate More info: Generating 将静态文件发布到GitHub_config.yml 指定自己GitHub博客仓库路径 1$ hexo clean &amp;&amp; hexo g &amp;&amp; hexo deploy More info: Deployment","categories":[{"name":"LLI","slug":"LLI","permalink":"http://yoursite.com/categories/LLI/"},{"name":"hexo","slug":"LLI/hexo","permalink":"http://yoursite.com/categories/LLI/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"},{"name":"init","slug":"init","permalink":"http://yoursite.com/tags/init/"}]},{"title":"MyBatis plugin for IntelliJ 各个版本的下载地址","slug":"2017/MyBatis_Plugin","date":"2019-07-26T11:26:03.792Z","updated":"2019-07-26T11:26:03.792Z","comments":true,"path":"2019/07/26/2017/MyBatis_Plugin/","link":"","permalink":"http://yoursite.com/2019/07/26/2017/MyBatis_Plugin/","excerpt":"MyBatis plugin for IntelliJ： http://plugins.jetbrains.com/plugin/7293","text":"MyBatis plugin for IntelliJ： http://plugins.jetbrains.com/plugin/7293","categories":[],"tags":[]},{"title":"JRebel for IntelliJ 各个版本的下载地址","slug":"2017/JRebel","date":"2019-07-26T11:26:03.788Z","updated":"2019-07-26T11:26:03.788Z","comments":true,"path":"2019/07/26/2017/JRebel/","link":"","permalink":"http://yoursite.com/2019/07/26/2017/JRebel/","excerpt":"JRebel for IntelliJ： http://plugins.jetbrains.com/plugin/?id=4441","text":"JRebel for IntelliJ： http://plugins.jetbrains.com/plugin/?id=4441","categories":[],"tags":[]},{"title":"一个令人赏心悦目的视频分享给大家","slug":"2017/launchpad","date":"2019-07-26T08:59:34.599Z","updated":"2019-07-26T08:59:34.599Z","comments":true,"path":"2019/07/26/2017/launchpad/","link":"","permalink":"http://yoursite.com/2019/07/26/2017/launchpad/","excerpt":"Launchpad : Zedd - Spectrum 音乐及视频文件下载：链接：http://pan.baidu.com/s/1kVll2Vt 密码：s9jm launchpad社区：http://abletive.com/","text":"Launchpad : Zedd - Spectrum 音乐及视频文件下载：链接：http://pan.baidu.com/s/1kVll2Vt 密码：s9jm launchpad社区：http://abletive.com/","categories":[],"tags":[]}]}